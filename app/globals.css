/* file: app/globals.css */
@tailwind base;
@tailwind components;
@tailwind utilities;

/*
 * ============================================================================
 * MOTION SYSTEM
 * ============================================================================
 */
:root {
  --dur-1: 220ms;
  --dur-2: 320ms;
  --dur-3: 700ms;
  --dur-4: 1000ms;
  --ease-out: cubic-bezier(0.22, 1, 0.36, 1);
  --ease-enter: cubic-bezier(0.16, 1, 0.3, 1);
}

/*
 * ============================================================================
 * THEME TOKENS
 * ============================================================================
 */
@layer base {
  :root,
  [data-theme="classic"] {
    --font-sans: "Crimson Pro", Georgia, serif;
    --font-heading: "Playfair Display", Georgia, serif;
    --font-mono: "JetBrains Mono", monospace;
    
    --text-display-xl: 4.5rem;
    --text-display-lg: 3.5rem;
    --text-display: 2.5rem;
    --leading-display: 1.1;
    
    /* Colors - dark palette (black bg, white text) */
    --primary: 0 0% 95%;
    --primary-foreground: 0 0% 5%;
    --secondary: 0 0% 15%;
    --secondary-foreground: 0 0% 90%;
    
    /* Black background */
    --background: 0 0% 3%;
    --foreground: 0 0% 95%;
    
    --card: 0 0% 7%;
    --card-foreground: 0 0% 92%;
    
    --popover: 0 0% 7%;
    --popover-foreground: 0 0% 92%;
    
    --muted: 0 0% 12%;
    --muted-foreground: 0 0% 60%;
    
    --accent: 0 0% 14%;
    --accent-foreground: 0 0% 92%;
    
    --destructive: 0 62% 50%;
    --destructive-foreground: 0 0% 98%;
    
    --success: 142 72% 40%;
    --success-foreground: 0 0% 98%;
    
    --warning: 38 92% 50%;
    --warning-foreground: 0 0% 10%;
    
    --border: 0 0% 16%;
    --input: 0 0% 16%;
    --ring: 0 0% 80%;
    
    --section-spacing: 6rem;
    --container-padding: 1.5rem;
    --radius: 0.25rem;
    
    /* Shadows - subtle on dark */
    --shadow-card: 0 1px 3px 0 rgb(0 0 0 / 0.3);
    --shadow-elevated: 0 4px 16px -2px rgb(0 0 0 / 0.4);
    --shadow-stage: 0 4px 24px -4px rgb(0 0 0 / 0.5);
  }

  .dark {
    --background: 220 15% 8%;
    --foreground: 0 0% 95%;
    --card: 220 15% 11%;
    --card-foreground: 0 0% 95%;
    --popover: 220 15% 11%;
    --popover-foreground: 0 0% 95%;
    --muted: 220 10% 16%;
    --muted-foreground: 220 10% 60%;
    --accent: 220 10% 18%;
    --accent-foreground: 0 0% 95%;
    --border: 220 10% 20%;
    --input: 220 10% 20%;
  }
}

/*
 * ============================================================================
 * BASE STYLES
 * ============================================================================
 */
@layer base {
  * {
    @apply border-border;
  }
  
  html {
    scroll-behavior: smooth;
    font-size: 16px;
  }
  
  body {
    @apply text-foreground antialiased;
    background: hsl(var(--background));
    font-feature-settings: "rlig" 1, "calt" 1;
    line-height: 1.7;
  }
  
  p {
    line-height: 1.75;
  }
  
  h1, h2, h3, h4, h5, h6 {
    font-family: var(--font-heading);
    @apply font-semibold tracking-tight;
    line-height: 1.15;
  }
  
  /* Focus states */
  :focus-visible {
    @apply outline-none;
    box-shadow: 0 0 0 2px hsl(var(--background)), 0 0 0 4px hsl(var(--primary));
  }
  
  button:focus-visible,
  a:focus-visible,
  [role="button"]:focus-visible {
    @apply outline-none;
    box-shadow: 0 0 0 2px hsl(var(--background)), 0 0 0 4px hsl(var(--primary));
  }
  
  input:focus-visible,
  textarea:focus-visible,
  select:focus-visible {
    @apply outline-none;
    box-shadow: 0 0 0 2px hsl(var(--background)), 0 0 0 4px hsl(var(--primary));
  }
  
  .skip-link {
    @apply sr-only focus:not-sr-only focus:absolute focus:top-4 focus:left-4 focus:z-50;
    @apply focus:px-4 focus:py-2 focus:bg-primary focus:text-primary-foreground focus:rounded;
    font-weight: 600;
  }
}

/*
 * ============================================================================
 * COMPONENT STYLES
 * ============================================================================
 */
@layer components {
  .container-custom {
    @apply mx-auto w-full max-w-7xl;
    padding-left: var(--container-padding);
    padding-right: var(--container-padding);
  }
  
  .section-spacing {
    padding-top: var(--section-spacing);
    padding-bottom: var(--section-spacing);
  }
  
  .prose-custom {
    @apply max-w-none text-foreground;
  }
  
  .prose-custom h1, .prose-custom h2, .prose-custom h3,
  .prose-custom h4, .prose-custom h5, .prose-custom h6 {
    font-family: var(--font-heading);
    @apply text-foreground font-semibold;
  }
  
  .prose-custom a {
    @apply text-primary no-underline hover:underline;
  }
  
  .prose-custom strong {
    @apply text-foreground font-semibold;
  }
  
  .prose-custom code {
    @apply text-primary bg-muted px-1.5 py-0.5 rounded text-sm;
  }
  
  .prose-custom pre {
    @apply bg-muted border border-border rounded p-4 overflow-x-auto;
  }
  
  .prose-custom blockquote {
    @apply border-l-2 border-primary pl-4 italic text-muted-foreground;
  }
}

/*
 * ============================================================================
 * HERO WITH POLISH FLAG BACKGROUND
 * ============================================================================
 */
.hero-flag-bg {
  position: relative;
  background: linear-gradient(180deg, 
    hsl(var(--background)) 0%, 
    hsl(var(--background)) 48%,
    /* subtle national accent on dark */
    hsl(0 0% 5%) 50%,
    hsl(0 0% 6%) 62%,
    hsl(0 10% 8%) 75%,
    hsl(0 15% 12%) 100%
  );
}

.hero-flag-bg::before {
  content: '';
  position: absolute;
  inset: 0;
  background: radial-gradient(ellipse 80% 60% at 50% 30%, rgba(0,0,0,0.5), transparent);
  pointer-events: none;
}

/*
 * ============================================================================
 * KEYFRAMES
 * ============================================================================
 */
@keyframes heroReveal {
  0% {
    opacity: 0;
    transform: translateY(10px);
  }
  100% {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes panelEntrance {
  0% {
    opacity: 0;
    transform: translateY(12px);
  }
  100% {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes panelTakeover {
  0% { opacity: 1; }
  100% { opacity: 1; transform: scale(1.01); }
}

@keyframes panelFadeOut {
  0% { opacity: 1; transform: translateX(0); }
  100% { opacity: 0; transform: translateX(-16px); }
}

@keyframes panelFadeOutRight {
  0% { opacity: 1; transform: translateX(0); }
  100% { opacity: 0; transform: translateX(16px); }
}

@keyframes scrollPulse {
  0%, 100% { opacity: 0.35; transform: translateY(0); }
  50% { opacity: 0.7; transform: translateY(3px); }
}

@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}

@keyframes fadeInUp {
  from { opacity: 0; transform: translateY(14px); }
  to { opacity: 1; transform: translateY(0); }
}

/*
 * ============================================================================
 * WINGS GATEWAY
 * ============================================================================
 */
@layer utilities {
  /* Card hover effect */
  .card-hover {
    @apply transition-all;
    transition-duration: var(--dur-2);
    transition-timing-function: var(--ease-out);
  }
  
  .card-hover:hover {
    transform: translateY(-2px);
    box-shadow: var(--shadow-elevated);
  }

  .wings-gateway {
    @apply min-h-screen flex flex-col;
  }
  
  /* Wings page layout */
  .wings-page {
    @apply min-h-screen flex flex-col;
  }
  
  .wings-page-hero {
    @apply flex-1 flex items-center justify-center;
    min-height: calc(100vh - 80px);
    padding: 3rem 1rem;
    background: hsl(var(--background));
  }
  
  .wings-gateway-hero {
    @apply flex-1 flex items-center justify-center relative;
    min-height: 100vh;
    min-height: 100dvh;
    padding: 2.5rem 1rem 4rem;
    /* Subtle radial highlight */
    background: radial-gradient(ellipse 70% 40% at 50% 35%, rgba(15, 23, 42, 0.035), transparent);
  }
  
  /* STAGE: Anchoring surface */
  .wings-stage {
    width: 100%;
    max-width: 1080px;
    margin: 0 auto;
    padding: 40px 28px 32px;
    background: hsl(var(--card));
    border: 1px solid rgba(16, 24, 39, 0.08);
    border-radius: 22px;
    box-shadow: 0 4px 24px -4px rgba(16, 24, 39, 0.1);
  }
  
  @media (min-width: 768px) {
    .wings-stage {
      padding: 44px 40px 36px;
    }
  }
  
  /* Hero content entrance */
  .hero-reveal {
    opacity: 0;
    animation: heroReveal var(--dur-4) var(--ease-enter) forwards;
  }
  
  .hero-reveal-1 { animation-delay: 0ms; }
  .hero-reveal-2 { animation-delay: 80ms; }
  .hero-reveal-3 { animation-delay: 160ms; }
  
  /* Panel entrance */
  .panel-entrance {
    opacity: 0;
    animation: panelEntrance var(--dur-4) var(--ease-enter) forwards;
  }
  
  .panel-entrance-1 { animation-delay: 280ms; }
  .panel-entrance-2 { animation-delay: 360ms; }
  .panel-entrance-3 { animation-delay: 440ms; }
  
  /* Wing panel base */
  .wing-panel {
    @apply relative cursor-pointer;
    min-height: 200px;
    padding: 24px;
    background: hsl(var(--card));
    border-radius: 16px;
    transition: 
      transform var(--dur-2) var(--ease-out),
      box-shadow var(--dur-2) var(--ease-out),
      border-color var(--dur-2) var(--ease-out);
    will-change: transform;
  }
  
  @media (min-width: 768px) {
    .wing-panel {
      min-height: 260px;
      padding: 30px;
    }
  }
  
  /* Side panels (lighter) */
  .wing-panel-side {
    border: 1px solid rgba(16, 24, 39, 0.09);
    box-shadow: 0 2px 12px -2px rgba(16, 24, 39, 0.06);
  }
  
  .wing-panel-side:hover {
    transform: translateY(-3px);
    box-shadow: 0 6px 20px -4px rgba(16, 24, 39, 0.1);
    border-color: rgba(16, 24, 39, 0.12);
  }
  
  .wing-panel-side:focus-visible {
    transform: translateY(-3px);
    box-shadow: 0 0 0 2px hsl(var(--background)), 0 0 0 4px hsl(var(--primary));
  }
  
  /* Main panel (center, dominant) */
  .wing-panel-main {
    background: hsl(var(--card));
    border: 1px solid rgba(16, 24, 39, 0.14);
    box-shadow: 0 6px 28px -4px rgba(16, 24, 39, 0.12);
  }
  
  .wing-panel-main:hover {
    transform: translateY(-4px);
    box-shadow: 0 10px 36px -6px rgba(16, 24, 39, 0.15);
    border-color: rgba(16, 24, 39, 0.18);
  }
  
  .wing-panel-main:focus-visible {
    transform: translateY(-4px);
    box-shadow: 0 0 0 2px hsl(var(--background)), 0 0 0 4px hsl(var(--primary));
  }
  
  /* ========== WING-SPECIFIC BACKGROUNDS ========== */
  
  /* International Wing - dark blue tint */
  .wing-panel-international {
    background: linear-gradient(145deg, hsl(0 0% 7%) 0%, hsl(220 20% 10%) 50%, hsl(220 30% 12%) 100%);
    border-color: rgba(59, 130, 246, 0.15);
  }
  
  .wing-panel-international:hover {
    border-color: rgba(59, 130, 246, 0.3);
    background: linear-gradient(145deg, hsl(0 0% 8%) 0%, hsl(220 20% 12%) 50%, hsl(220 30% 14%) 100%);
  }
  
  /* Main Wing - dark with subtle red accent at bottom */
  .wing-panel-poland {
    background: linear-gradient(180deg, hsl(0 0% 7%) 0%, hsl(0 0% 7%) 45%, hsl(0 5% 9%) 55%, hsl(0 15% 12%) 75%, hsl(0 25% 15%) 100%);
    border-color: rgba(185, 28, 28, 0.15);
  }
  
  .wing-panel-poland:hover {
    border-color: rgba(185, 28, 28, 0.3);
    background: linear-gradient(180deg, hsl(0 0% 8%) 0%, hsl(0 0% 8%) 40%, hsl(0 5% 10%) 50%, hsl(0 20% 14%) 70%, hsl(0 30% 18%) 100%);
  }
  
  /* Female Wing - roses background with dark overlay for text visibility */
  .wing-panel-female {
    background: 
      linear-gradient(145deg, rgba(136, 19, 55, 0.45) 0%, rgba(159, 18, 57, 0.4) 50%, rgba(190, 18, 60, 0.35) 100%),
      url('/women_wing.jpg') center/cover no-repeat;
    border-color: rgba(219, 39, 119, 0.2);
  }
  
  .wing-panel-female:hover {
    border-color: rgba(219, 39, 119, 0.35);
    background: 
      linear-gradient(145deg, rgba(136, 19, 55, 0.35) 0%, rgba(159, 18, 57, 0.3) 50%, rgba(190, 18, 60, 0.25) 100%),
      url('/women_wing.jpg') center/cover no-repeat;
  }
  
  /* Text styling for female wing */
  .wing-panel-female .wing-panel-title,
  .wing-panel-female .wing-panel-cta {
    color: white;
    text-shadow: 0 1px 3px rgba(0,0,0,0.3);
  }
  
  .wing-panel-female .wing-panel-desc {
    color: rgba(255, 255, 255, 0.9);
    text-shadow: 0 1px 2px rgba(0,0,0,0.2);
  }
  
  .wing-panel-female .wing-panel-divider {
    background: rgba(255, 255, 255, 0.3);
  }
  
  .wing-panel-female .wing-panel-cta-arrow {
    color: white;
  }
  
  .wing-panel-female:hover .wing-panel-cta {
    border-bottom-color: rgba(255, 255, 255, 0.5);
  }
  
  /* Panel title */
  .wing-panel-title {
    @apply font-heading font-semibold text-foreground;
    letter-spacing: -0.01em;
    margin-bottom: 8px;
    transition: letter-spacing var(--dur-2) var(--ease-out);
  }
  
  .wing-panel:hover .wing-panel-title {
    letter-spacing: 0.005em;
  }
  
  /* Panel description */
  .wing-panel-desc {
    @apply text-muted-foreground;
    line-height: 1.55;
    margin-bottom: 12px;
  }
  
  /* Panel divider */
  .wing-panel-divider {
    height: 1px;
    background: rgba(16, 24, 39, 0.08);
    margin: 0 0 16px 0;
  }
  
  /* Panel footer */
  .wing-panel-footer {
    display: flex;
    align-items: center;
  }
  
  /* Panel CTA */
  .wing-panel-cta {
    @apply text-sm font-medium text-foreground;
    display: inline-flex;
    align-items: center;
    gap: 6px;
    padding-bottom: 1px;
    border-bottom: 1px solid transparent;
    transition: 
      gap var(--dur-2) var(--ease-out),
      border-color var(--dur-2) var(--ease-out);
  }
  
  .wing-panel:hover .wing-panel-cta {
    border-bottom-color: rgba(16, 24, 39, 0.35);
  }
  
  .wing-panel:focus-visible .wing-panel-cta {
    border-bottom-color: rgba(16, 24, 39, 0.35);
  }
  
  .wing-panel-cta-arrow {
    width: 14px;
    height: 14px;
    transition: transform var(--dur-2) var(--ease-out);
  }
  
  .wing-panel:hover .wing-panel-cta-arrow {
    transform: translateX(3px);
  }
  
  .wing-panel:focus-visible .wing-panel-cta-arrow {
    transform: translateX(3px);
  }
  
  /* Panel takeover states */
  .wing-panel.is-selected {
    animation: panelTakeover var(--dur-3) var(--ease-enter) forwards;
    z-index: 10;
  }
  
  .wing-panel.is-fading-left {
    animation: panelFadeOut var(--dur-3) var(--ease-enter) forwards;
  }
  
  .wing-panel.is-fading-right {
    animation: panelFadeOutRight var(--dur-3) var(--ease-enter) forwards;
  }
  
  /* Scroll indicator */
  .scroll-indicator {
    @apply absolute bottom-6 left-1/2 -translate-x-1/2;
    @apply flex flex-col items-center;
    @apply text-muted-foreground;
    animation: scrollPulse 2.5s var(--ease-out) infinite;
  }
  
  .scroll-indicator svg {
    width: 20px;
    height: 20px;
  }
  
  /* Section reveals */
  .reveal-section {
    opacity: 0;
    animation: fadeInUp var(--dur-3) var(--ease-enter) forwards;
  }
  
  .reveal-delay-1 { animation-delay: 0ms; }
  .reveal-delay-2 { animation-delay: 80ms; }
  .reveal-delay-3 { animation-delay: 160ms; }
  .reveal-delay-4 { animation-delay: 240ms; }
  
  /* Hover lift for buttons */
  .hover-lift {
    transition: transform var(--dur-2) var(--ease-out), box-shadow var(--dur-2) var(--ease-out);
  }
  
  .hover-lift:hover {
    transform: translateY(-2px);
    box-shadow: var(--shadow-elevated);
  }
  
  /* Reduced motion */
  @media (prefers-reduced-motion: reduce) {
    .hero-reveal,
    .panel-entrance,
    .wing-panel,
    .wing-panel-title,
    .wing-panel-cta,
    .wing-panel-cta-arrow,
    .scroll-indicator,
    .reveal-section {
      animation: none !important;
      transition: opacity var(--dur-1) ease !important;
      transform: none !important;
      opacity: 1 !important;
    }
    
    .wing-panel:hover,
    .wing-panel:focus-visible {
      transform: none !important;
    }
    
    .wing-panel:hover .wing-panel-cta-arrow,
    .wing-panel:focus-visible .wing-panel-cta-arrow {
      transform: none !important;
    }
  }
}

/*
 * ============================================================================
 * INTERNATIONAL WING PAGE
 * ============================================================================
 */
@keyframes revealUp {
  from {
    opacity: 0;
    transform: translateY(24px);
    filter: blur(4px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
    filter: blur(0);
  }
}

@keyframes revealScale {
  from {
    opacity: 0;
    transform: scale(0.96);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}

@layer utilities {
  /* Reveal animation classes for IntersectionObserver */
  .int-reveal {
    opacity: 0;
    transform: translateY(24px);
    filter: blur(4px);
    transition: 
      opacity var(--dur-3) var(--ease-enter),
      transform var(--dur-3) var(--ease-enter),
      filter var(--dur-3) var(--ease-enter);
  }
  
  .int-reveal.is-visible {
    opacity: 1;
    transform: translateY(0);
    filter: blur(0);
  }
  
  .int-reveal-scale {
    opacity: 0;
    transform: scale(0.96);
    transition: 
      opacity var(--dur-3) var(--ease-enter),
      transform var(--dur-3) var(--ease-enter);
  }
  
  .int-reveal-scale.is-visible {
    opacity: 1;
    transform: scale(1);
  }
  
  /* Activity cards */
  .int-activity-card {
    @apply relative bg-card border border-border rounded-xl;
    transition: 
      transform var(--dur-2) var(--ease-out),
      box-shadow var(--dur-2) var(--ease-out),
      border-color var(--dur-2) var(--ease-out);
  }
  
  .int-activity-card::before {
    content: '';
    position: absolute;
    inset: 0;
    border-radius: inherit;
    background: linear-gradient(145deg, rgba(255, 255, 255, 0.02) 0%, transparent 60%);
    pointer-events: none;
  }
  
  .int-activity-card:hover {
    transform: translateY(-3px);
    box-shadow: 0 8px 24px -8px rgba(255, 255, 255, 0.06);
    border-color: rgba(255, 255, 255, 0.15);
  }
  
  /* Boundaries cards */
  .int-boundary-card {
    @apply relative rounded-xl p-6;
    transition: 
      transform var(--dur-2) var(--ease-out),
      box-shadow var(--dur-2) var(--ease-out);
  }
  
  .int-boundary-card-can {
    background: linear-gradient(145deg, rgba(34, 197, 94, 0.08) 0%, rgba(34, 197, 94, 0.03) 100%);
    border: 1px solid rgba(34, 197, 94, 0.15);
  }
  
  .int-boundary-card-cannot {
    background: linear-gradient(145deg, rgba(239, 68, 68, 0.08) 0%, rgba(239, 68, 68, 0.03) 100%);
    border: 1px solid rgba(239, 68, 68, 0.15);
  }
  
  .int-boundary-card:hover {
    transform: translateY(-2px);
  }
  
  .int-boundary-card-can:hover {
    box-shadow: 0 8px 24px -8px rgba(34, 197, 94, 0.1);
  }
  
  .int-boundary-card-cannot:hover {
    box-shadow: 0 8px 24px -8px rgba(239, 68, 68, 0.1);
  }
  
  /* Disclaimer callout */
  .int-disclaimer {
    @apply relative bg-muted/50 border-l-4 border-muted-foreground/30 rounded-r-lg;
    @apply py-4 px-5;
  }
  
  .int-disclaimer::before {
    content: '';
    position: absolute;
    top: 0;
    left: -4px;
    bottom: 0;
    width: 4px;
    background: linear-gradient(180deg, rgba(255,255,255,0.3) 0%, rgba(255,255,255,0.1) 100%);
    border-radius: 4px 0 0 4px;
  }
  
  /* Form card */
  .int-form-card {
    @apply bg-card rounded-2xl border border-border;
    box-shadow: var(--shadow-elevated);
  }
  
  /* Reduced motion */
  @media (prefers-reduced-motion: reduce) {
    .int-reveal,
    .int-reveal-scale,
    .int-activity-card,
    .int-boundary-card {
      animation: none !important;
      transition: opacity 0.15s ease !important;
      transform: none !important;
      filter: none !important;
    }
    
    .int-reveal,
    .int-reveal-scale {
      opacity: 1 !important;
    }
    
    .int-activity-card:hover,
    .int-boundary-card:hover {
      transform: none !important;
    }
  }
}

/*
 * ============================================================================
 * GENERAL UTILITIES
 * ============================================================================
 */
@layer utilities {
  .scroll-mt-header {
    scroll-margin-top: 5rem;
  }
  
  .line-clamp-2 {
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }
  
  .line-clamp-3 {
    display: -webkit-box;
    -webkit-line-clamp: 3;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }
  
  .animate-fade-in {
    animation: fadeIn var(--dur-3) var(--ease-enter) forwards;
  }
  
  .animate-fade-in-up {
    animation: fadeInUp var(--dur-3) var(--ease-enter) forwards;
  }
}

/*
 * ============================================================================
 * RESPONSIVE
 * ============================================================================
 */
@media (max-width: 768px) {
  html {
    font-size: 15px;
  }
  
  .wings-gateway-hero {
    padding: 2rem 0.75rem 3rem;
  }
  
  .wings-stage {
    padding: 32px 20px 28px;
    border-radius: 18px;
  }
}

@media (min-width: 769px) {
  html {
    font-size: 16px;
  }
}
